!function(){function i(i){let n={interval:i.interval?i.interval:100,element:i.element,recordingData:i.recordingData,runningTimeStamp:0,displayHTML:i.recordingData.initialText?i.recordingData.initialText:"",timer:null,onRender:i.onRender?i.onRender:()=>{},onPlay:i.onPlay?i.onPlay:()=>{}};function t(){n.element.innerHTML=n.displayHTML,n.onRender(n.element)}function e(){let i=n.recordingData.changeLog.length-1,t=n.runningTimeStamp+n.interval;do{let e=n.recordingData.changeLog[i];if(n.runningTimeStamp<=e.timestamp&&e.timestamp<=t)return e.text;i--}while(i>=0);return null}function a(){let i=n.recordingData,a=e();null!==a&&(n.displayHTML=a,t()),n.onPlay(n.runningTimeStamp,n.recordingData.endTimestampMS),n.runningTimeStamp+=n.interval,n.runningTimeStamp>i.endTimestampMS&&(this.isLooped?(n.runningTimeStamp=0,n.displayHTML=i.initialText):(n.onPlay(n.recordingData.endTimestampMS,n.recordingData.endTimestampMS),clearInterval(n.timer)))}function r(i){clearInterval(n.timer),n.runningTimeStamp=i,n.displayHTML=0===i?n.recordingData.initialText?n.recordingData.initialText:"":e(),t(),n.onPlay(n.runningTimeStamp,n.recordingData.endTimestampMS),this.isPlaying&&(n.timer=setInterval(()=>a(),n.interval))}return""!==n.displayHTML&&t(),this.isPlaying=!1,this.isLooped=!1,this.play=function(i){this.isPlaying=!0,this.isLooped=i,clearInterval(n.timer),n.timer=setInterval(()=>a(),n.interval)},this.pause=function(){this.isPlaying=!1,this.isLooped=!1,clearInterval(n.timer)},this.jump=function(i){this.isPlaying=!1,this.isLooped=!1,i>n.recordingData.endTimestampMS?i=n.recordingData.endTimestampMS:i<0&&(i=0),r(i)},this.stop=function(){this.isPlaying=!1,this.isLooped=!1,r(n.recordingData.endTimestampMS)},this.updateData=function(i){this.isPlaying=!1,this.isLooped=!1,n.recordingData=i,n.displayHTML=i.initialText?i.initialText:"",r(0)},this}window.rotoscodejs=function(n){return new i(n)}}();